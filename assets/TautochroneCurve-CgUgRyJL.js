import{S as Me,i as Te,s as Ce,h as _e,j as s,k as S,t as R,b as a,l as pe,c as V,d as l,m as ge,o as le,p as Pe,q as ye,n as me,e as z,r as Ye,u as Ie,v as we,w as he,x as fe}from"./index-qqfZEVvf.js";function ke(t,o,n){const r=t.slice();r[37]=o[n],r[41]=n;const p=r[11](r[6].length,r[41]+1,r[3],r[4]);return r[38]=p.share,r[39]=p.tautPercentage,r}function ve(t){let o,n,r;return{c(){o=s("button"),o.textContent="Reset",a(o,"type","button")},m(p,_){V(p,o,_),n||(r=le(o,"click",t[18]),n=!0)},p:me,d(p){p&&z(o),n=!1,r()}}}function Fe(t){let o=100/t[1]+"",n,r,p=t[39]*100+"",_,d;return{c(){n=R(o),r=R("% → "),_=R(p),d=R("%")},m(c,h){V(c,n,h),V(c,r,h),V(c,_,h),V(c,d,h)},p(c,h){h[0]&2&&o!==(o=100/c[1]+"")&&he(n,o),h[0]&88&&p!==(p=c[39]*100+"")&&he(_,p)},d(c){c&&(z(n),z(r),z(_),z(d))}}}function Xe(t){let o=parseFloat((100/t[1]).toFixed(2))+"",n,r,p=parseFloat((t[39]*100).toFixed(2))+"",_,d;return{c(){n=R(o),r=R("% → "),_=R(p),d=R("%")},m(c,h){V(c,n,h),V(c,r,h),V(c,_,h),V(c,d,h)},p(c,h){h[0]&2&&o!==(o=parseFloat((100/c[1]).toFixed(2))+"")&&he(n,o),h[0]&88&&p!==(p=parseFloat((c[39]*100).toFixed(2))+"")&&he(_,p)},d(c){c&&(z(n),z(r),z(_),z(d))}}}function Se(t){let o,n,r,p,_=t[38]+"",d,c,h,M,U,ne=t[41]+1+"",D,m,T,Y,g,L,W,w=t[37]+"",B,j,N,y,Z,f,A,F,x,K,$,oe;function Q(){return t[21](t[41])}function ae(){return t[22](t[41])}function se(){return t[23](t[41])}function G(){return t[24](t[41])}function ee(E,e){return E[5]?Xe:Fe}let te=ee(t),P=te(t);return{c(){o=s("tr"),n=s("td"),r=s("b"),p=R("$"),d=R(_),c=S(),h=s("td"),M=s("button"),M.textContent="-",U=S(),D=R(ne),m=S(),T=s("button"),Y=R("+"),L=S(),W=s("td"),B=R(w),j=S(),N=s("td"),y=s("button"),y.textContent="×",Z=S(),f=s("td"),A=s("label"),F=s("input"),K=S(),P.c(),a(n,"class","svelte-11u4bst"),a(M,"type","button"),M.disabled=t[41]===0,a(T,"type","button"),T.disabled=g=t[41]===t[6].length-1,a(h,"class","svelte-11u4bst"),a(W,"class","svelte-11u4bst"),a(y,"type","button"),pe(y,"color","var(--color-red-500)"),a(N,"class","svelte-11u4bst"),a(F,"placeholder","graph"),F.checked=x=t[2]===t[41]+1,a(F,"name","individual"),a(F,"type","radio"),a(f,"class","svelte-11u4bst")},m(E,e){V(E,o,e),l(o,n),l(n,r),l(r,p),l(r,d),l(o,c),l(o,h),l(h,M),l(h,U),l(h,D),l(h,m),l(h,T),l(T,Y),l(o,L),l(o,W),l(W,B),l(o,j),l(o,N),l(N,y),l(o,Z),l(o,f),l(f,A),l(A,F),l(A,K),P.m(A,null),$||(oe=[le(M,"click",Q),le(T,"click",ae),le(y,"click",se),le(F,"input",G)],$=!0)},p(E,e){t=E,e[0]&88&&_!==(_=t[38]+"")&&he(d,_),e[0]&64&&g!==(g=t[41]===t[6].length-1)&&(T.disabled=g),e[0]&64&&w!==(w=t[37]+"")&&he(B,w),e[0]&4&&x!==(x=t[2]===t[41]+1)&&(F.checked=x),te===(te=ee(t))&&P?P.p(t,e):(P.d(1),P=te(t),P&&(P.c(),P.m(A,null)))},d(E){E&&z(o),P.d(),$=!1,Ie(oe)}}}function Re(t){let o,n,r,p,_,d,c,h,M,U,ne,D,m,T,Y,g,L,W,w,B,j,N,y,Z,f,A,F,x,K,$,oe,Q,ae,se,G,ee,te,P,E,e,u,b,H,C,X,J,re,k=!t[10]&&ve(t),q=_e(t[6]),v=[];for(let i=0;i<q.length;i+=1)v[i]=Se(ke(t,q,i));return{c(){o=s("div"),n=s("canvas"),r=S(),p=s("br"),_=S(),d=s("form"),c=s("label"),h=R("Profit: $"),M=s("input"),U=S(),k&&k.c(),ne=S(),D=s("table"),m=s("tr"),T=s("th"),Y=R("Share "),g=s("label"),L=s("small"),L.textContent="Round",W=S(),w=s("input"),B=S(),j=s("th"),j.textContent="Impact",N=S(),y=s("th"),y.textContent="Motive",Z=S(),f=s("th"),f.textContent="Remove",A=S(),F=s("th"),x=R("Graph "),K=s("label"),$=s("small"),$.textContent="Limit decimals",oe=S(),Q=s("input"),ae=S();for(let i=0;i<v.length;i+=1)v[i].c();se=S(),G=s("tr"),ee=s("td"),ee.innerHTML='<button type="submit">Add share</button>',te=S(),P=s("td"),E=s("label"),e=s("input"),H=S(),C=s("td"),X=s("textarea"),a(n,"class","svelte-11u4bst"),a(M,"type","number"),a(w,"type","checkbox"),a(T,"class","svelte-11u4bst"),a(j,"class","svelte-11u4bst"),a(y,"class","svelte-11u4bst"),a(f,"class","svelte-11u4bst"),a(Q,"type","checkbox"),a(F,"class","svelte-11u4bst"),a(ee,"class","svelte-11u4bst"),a(e,"placeholder","share Impact"),a(e,"min","1"),a(e,"max",u=t[6].length+1),a(e,"type","number"),a(e,"name","share-impact"),e.value=b=t[6].length+1,a(P,"class","svelte-11u4bst"),pe(X,"display","block"),a(X,"name","share-motive"),a(C,"colspan","3"),pe(C,"padding","0"),a(C,"class","svelte-11u4bst"),a(D,"class","svelte-11u4bst"),a(d,"class","svelte-11u4bst")},m(i,O){V(i,o,O),l(o,n),t[15](n),l(o,r),l(o,p),l(o,_),l(o,d),l(d,c),l(c,h),l(c,M),t[16](M),ge(M,t[3]),l(d,U),k&&k.m(d,null),l(d,ne),l(d,D),l(D,m),l(m,T),l(T,Y),l(T,g),l(g,L),l(g,W),l(g,w),w.checked=t[4],l(m,B),l(m,j),l(m,N),l(m,y),l(m,Z),l(m,f),l(m,A),l(m,F),l(F,x),l(F,K),l(K,$),l(K,oe),l(K,Q),Q.checked=t[5],l(D,ae);for(let I=0;I<v.length;I+=1)v[I]&&v[I].m(D,null);l(D,se),l(D,G),l(G,ee),l(G,te),l(G,P),l(P,E),l(E,e),t[25](e),l(G,H),l(G,C),l(C,X),t[26](X),J||(re=[le(M,"input",t[17]),le(w,"change",t[19]),le(Q,"change",t[20]),le(d,"submit",Pe(t[27]))],J=!0)},p(i,O){if(O[0]&8&&ye(M.value)!==i[3]&&ge(M,i[3]),i[10]?k&&(k.d(1),k=null):k?k.p(i,O):(k=ve(i),k.c(),k.m(d,ne)),O[0]&16&&(w.checked=i[4]),O[0]&32&&(Q.checked=i[5]),O[0]&3198){q=_e(i[6]);let I;for(I=0;I<q.length;I+=1){const de=ke(i,q,I);v[I]?v[I].p(de,O):(v[I]=Se(de),v[I].c(),v[I].m(D,se))}for(;I<v.length;I+=1)v[I].d(1);v.length=q.length}O[0]&64&&u!==(u=i[6].length+1)&&a(e,"max",u),O[0]&64&&b!==(b=i[6].length+1)&&e.value!==b&&(e.value=b)},i:me,o:me,d(i){i&&z(o),t[15](null),t[16](null),k&&k.d(),Ye(v,i),t[25](null),t[26](null),J=!1,Ie(re)}}}const ue=100,ie=1,ce=1;function De(t,o,n){const r=(e,u,b)=>{e&&(e.clearRect(0,0,ne,D),e.strokeStyle=getComputedStyle(document.body).getPropertyValue("--fg-color"),p(e),h(e,u,b))},p=e=>{e.beginPath();for(let u=0;u<=Math.PI;u+=.01){const b=ue*(u-Math.sin(u)),H=ue*(1-Math.cos(u));e.lineTo(ie+b,ce+H)}e.stroke()},_=e=>{let u=Math.PI/2,b=!1;for(let C=0;C<10;C++){const X=u-(u-Math.sin(u)-e/ue)/(1-Math.cos(u)),J=Math.abs(X-u);if(u=X,J<1e-8){b=!0;break}}return b?ue*(1-Math.cos(u)):0},d=(e,u)=>{if(u<1||u>e)return;const b=M/e,H=b*(u-1),C=_(H),X=b*u,J=_(X);return{yPercentage:(J-C)/U,indX1:H,indY1:C,indX2:X,indY2:J}},c=(e,u,b,H)=>{const C=d(e,u);if(!C)return{share:0,tautPercentage:0};const{yPercentage:X}=C,J=X*b;return{share:H?Math.round(J):J,tautPercentage:X}},h=(e,u,b)=>{const H=d(u,b);if(!H)return;const{indX1:C,indY1:X,indX2:J,indY2:re}=H,k=Math.round(ie+C),q=Math.round(ce+X),v=Math.round(ie+J),i=Math.round(ce+re),O=Math.round(ie),I=Math.round(ce),de=Math.round(ie+M),be=Math.round(ce+U);e.beginPath(),e.moveTo(k,I),e.lineTo(k,q),e.lineTo(O,q),e.moveTo(v,I),e.lineTo(v,q),e.lineTo(de,q),e.moveTo(k,be),e.lineTo(k,i),e.lineTo(O,i),e.moveTo(v,be),e.lineTo(v,i),e.lineTo(de,i),e.moveTo(k,q),e.lineTo(k,i),e.lineTo(v,i),e.lineTo(v,q),e.lineTo(k,q),e.stroke()},M=ue*Math.PI,U=ue*2,ne=ie*2+M,D=ce*2+U;let m,T,Y=+(localStorage.getItem("tautochrone population")||10),g=+(localStorage.getItem("tautochrone individual")||1),L=+(localStorage.getItem("tautochrone resource")||1e6),W=localStorage.getItem("tautochrone threshold")!=="-1",w=localStorage.getItem("tautochrone limit decimals")!=="-1",B;we.subscribe(()=>{r(T,Y,g)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{r(T,Y,g)});let j,N,y=!0;const Z=["workforce","capital"];let f=[...Z];try{const e=localStorage.getItem("tautochrone shares");e&&(f=JSON.parse(e),y=!1)}catch{}const A=()=>{const e=new Date,u=e.getHours().toString().padStart(2,"0"),b=e.getMinutes().toString().padStart(2,"0"),H=e.getSeconds().toString().padStart(2,"0"),C=e.getMilliseconds().toString().padEnd(3,"0");return`${u}:${b}:${H}.${C}`};function F(e){fe[e?"unshift":"push"](()=>{m=e,n(0,m)})}function x(e){fe[e?"unshift":"push"](()=>{B=e,n(7,B)})}function K(){L=ye(this.value),n(3,L)}const $=()=>{n(6,f=[...Z]),n(10,y=!0),n(2,g=1),n(3,L=1e6)};function oe(){W=this.checked,n(4,W)}function Q(){w=this.checked,n(5,w)}const ae=e=>{f.splice(e-1,0,f.splice(e,1)[0]),n(6,f),n(10,y=!1)},se=e=>{f.splice(e+1,0,f.splice(e,1)[0]),n(6,f),n(10,y=!1)},G=e=>{n(6,f=f.filter((u,b)=>b!==e)),n(10,y=!1)},ee=e=>{n(2,g=e+1),n(10,y=!1)};function te(e){fe[e?"unshift":"push"](()=>{j=e,n(8,j)})}function P(e){fe[e?"unshift":"push"](()=>{N=e,n(9,N)})}const E=()=>{f.splice(+j.value-1,0,N.value||A()),n(6,f),n(9,N.value="",N),n(10,y=!1)};return t.$$.update=()=>{t.$$.dirty[0]&1&&m&&(n(0,m.width=ne,m),n(0,m.height=D,m),n(14,T=m.getContext("2d"))),t.$$.dirty[0]&2&&(Y<1&&n(1,Y=1),localStorage.setItem("tautochrone population",""+Y)),t.$$.dirty[0]&64&&n(1,Y=f.length),t.$$.dirty[0]&6&&(g<1&&n(2,g=1),g>Y&&n(2,g=Y),localStorage.setItem("tautochrone individual",""+g)),t.$$.dirty[0]&16390&&r(T,Y,g),t.$$.dirty[0]&8&&(L<1&&n(3,L=1),localStorage.setItem("tautochrone resource",""+L)),t.$$.dirty[0]&16&&(W?localStorage.removeItem("tautochrone threshold"):localStorage.setItem("tautochrone threshold","-1")),t.$$.dirty[0]&32&&(w?localStorage.removeItem("tautochrone limit decimals"):localStorage.setItem("tautochrone limit decimals","-1")),t.$$.dirty[0]&64&&localStorage.setItem("tautochrone shares",JSON.stringify(f))},[m,Y,g,L,W,w,f,B,j,N,y,c,Z,A,T,F,x,K,$,oe,Q,ae,se,G,ee,te,P,E]}class Le extends Me{constructor(o){super(),Te(this,o,De,Re,Ce,{},null,[-1,-1])}}export{Le as default};
