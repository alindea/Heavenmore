import{S as ye,i as Me,s as Se,h as he,j as a,k as y,t as $,b as i,l as ne,c as ae,d as l,m as ce,o as B,p as Ie,q as be,n as re,e as ie,r as Te,u as _e,v as Pe,w as fe,x as le}from"./index-D3H3uGc_.js";function de(t,s,n){const b=t.slice();return b[34]=s[n],b[36]=n,b}function pe(t){let s,n,b;return{c(){s=a("button"),s.textContent="Reset",i(s,"type","button")},m(H,R){ae(H,s,R),n||(b=B(s,"click",t[17]),n=!0)},p:re,d(H){H&&ie(s),n=!1,b()}}}function ge(t){let s,n,b,H,R=(t[9](t[4].length,t[36]+1,t[2],t[3])||0)+"",L,F,d,T,X,V=t[36]+1+"",W,p,k,m,h,f,P,q=t[34]+"",w,M,v,C,c,A,g,S,D,z,j;function N(){return t[18](t[36])}function J(){return t[19](t[36])}function U(){return t[20](t[36])}function _(){return t[21](t[36])}return{c(){s=a("tr"),n=a("td"),b=a("b"),H=$("$"),L=$(R),F=y(),d=a("td"),T=a("button"),T.textContent="+",X=y(),W=$(V),p=y(),k=a("button"),m=$("-"),f=y(),P=a("td"),w=$(q),M=y(),v=a("td"),C=a("button"),C.textContent="Ã—",c=y(),A=a("td"),g=a("label"),S=a("input"),i(n,"class","svelte-1vhsxgl"),i(T,"type","button"),T.disabled=t[36]===0,i(k,"type","button"),k.disabled=h=t[36]===t[4].length-1,i(d,"class","svelte-1vhsxgl"),i(P,"class","svelte-1vhsxgl"),i(C,"type","button"),ne(C,"color","var(--color-red-500)"),i(v,"class","svelte-1vhsxgl"),i(S,"placeholder","Responsibility graph"),S.checked=D=t[1]===t[36]+1,i(S,"name","individual"),i(S,"type","radio"),ne(g,"display","block"),i(A,"class","svelte-1vhsxgl")},m(I,u){ae(I,s,u),l(s,n),l(n,b),l(b,H),l(b,L),l(s,F),l(s,d),l(d,T),l(d,X),l(d,W),l(d,p),l(d,k),l(k,m),l(s,f),l(s,P),l(P,w),l(s,M),l(s,v),l(v,C),l(s,c),l(s,A),l(A,g),l(g,S),z||(j=[B(T,"click",N),B(k,"click",J),B(C,"click",U),B(S,"input",_)],z=!0)},p(I,u){t=I,u[0]&28&&R!==(R=(t[9](t[4].length,t[36]+1,t[2],t[3])||0)+"")&&fe(L,R),u[0]&16&&h!==(h=t[36]===t[4].length-1)&&(k.disabled=h),u[0]&16&&q!==(q=t[34]+"")&&fe(w,q),u[0]&2&&D!==(D=t[1]===t[36]+1)&&(S.checked=D)},d(I){I&&ie(s),z=!1,_e(j)}}}function Ce(t){let s,n,b,H,R,L,F,d,T,X,V,W,p,k,m,h,f,P,q,w,M,v,C,c,A,g,S,D,z,j,N,J,U,_=!t[8]&&pe(t),I=he(t[4]),u=[];for(let e=0;e<I.length;e+=1)u[e]=ge(de(t,I,e));return{c(){s=a("div"),n=a("canvas"),b=y(),H=a("br"),R=y(),L=a("label"),F=$("Payment: $"),d=a("input"),T=y(),X=a("label"),V=a("small"),V.textContent="Round",W=y(),p=a("input"),k=y(),_&&_.c(),m=y(),h=a("form"),f=a("table"),P=a("tr"),P.innerHTML='<th class="svelte-1vhsxgl">Share</th> <th class="svelte-1vhsxgl">Responsible</th> <th class="svelte-1vhsxgl">Motive</th> <th class="svelte-1vhsxgl">Remove</th> <th class="svelte-1vhsxgl">Graph</th>',q=y();for(let e=0;e<u.length;e+=1)u[e].c();w=y(),M=a("tr"),v=a("td"),v.innerHTML='<button type="submit">Add share</button>',C=y(),c=a("td"),A=a("label"),g=a("input"),z=y(),j=a("td"),N=a("textarea"),i(d,"type","number"),i(p,"type","checkbox"),i(v,"class","svelte-1vhsxgl"),i(g,"placeholder","share responsibility"),i(g,"min","1"),i(g,"max",S=t[4].length+1),i(g,"type","number"),i(g,"name","share-responsibility"),g.value=D=t[4].length+1,i(c,"class","svelte-1vhsxgl"),ne(N,"display","block"),i(N,"name","share-motive"),i(j,"colspan","3"),ne(j,"padding","0"),i(j,"class","svelte-1vhsxgl"),i(f,"class","svelte-1vhsxgl")},m(e,o){ae(e,s,o),l(s,n),t[13](n),l(s,b),l(s,H),l(s,R),l(s,L),l(L,F),l(L,d),t[14](d),ce(d,t[2]),l(s,T),l(s,X),l(X,V),l(X,W),l(X,p),p.checked=t[3],l(s,k),_&&_.m(s,null),l(s,m),l(s,h),l(h,f),l(f,P),l(f,q);for(let r=0;r<u.length;r+=1)u[r]&&u[r].m(f,null);l(f,w),l(f,M),l(M,v),l(M,C),l(M,c),l(c,A),l(A,g),t[22](g),l(M,z),l(M,j),l(j,N),t[23](N),J||(U=[B(d,"input",t[15]),B(p,"change",t[16]),B(h,"submit",Ie(t[24]))],J=!0)},p(e,o){if(o[0]&4&&be(d.value)!==e[2]&&ce(d,e[2]),o[0]&8&&(p.checked=e[3]),e[8]?_&&(_.d(1),_=null):_?_.p(e,o):(_=pe(e),_.c(),_.m(s,m)),o[0]&798){I=he(e[4]);let r;for(r=0;r<I.length;r+=1){const Y=de(e,I,r);u[r]?u[r].p(Y,o):(u[r]=ge(Y),u[r].c(),u[r].m(f,w))}for(;r<u.length;r+=1)u[r].d(1);u.length=I.length}o[0]&16&&S!==(S=e[4].length+1)&&i(g,"max",S),o[0]&16&&D!==(D=e[4].length+1)&&g.value!==D&&(g.value=D)},i:re,o:re,d(e){e&&ie(s),t[13](null),t[14](null),_&&_.d(),Te(u,e),t[22](null),t[23](null),J=!1,_e(U)}}}const Z=100,Q=1,x=1;function Ye(t,s,n){const b=(e,o,r)=>{e&&(e.clearRect(0,0,V,W),e.strokeStyle=getComputedStyle(document.body).getPropertyValue("--fg-color"),H(e),d(e,o,r))},H=e=>{e.beginPath();for(let o=0;o<=Math.PI;o+=.01){const r=Z*(o-Math.sin(o)),Y=Z*(1-Math.cos(o));e.lineTo(Q+r,x+Y)}e.stroke()},R=e=>{let o=Math.PI/2,r=!1;for(let E=0;E<10;E++){const G=o-(o-Math.sin(o)-e/Z)/(1-Math.cos(o)),K=Math.abs(G-o);if(o=G,K<1e-8){r=!0;break}}return r?Z*(1-Math.cos(o)):0},L=(e,o)=>{if(o<1||o>e)return;const r=T/e,Y=r*(o-1),E=R(Y),G=r*o,K=R(G);return{yPercentage:(K-E)/X,indX1:Y,indY1:E,indX2:G,indY2:K}},F=(e,o,r,Y)=>{const E=L(e,o);if(!E)return 0;const G=E.yPercentage*r;return Y?Math.round(G):G},d=(e,o,r)=>{const Y=L(o,r);if(!Y)return;const{indX1:E,indY1:G,indX2:K,indY2:ue}=Y,ee=Math.round(Q+E),se=Math.round(x+G),te=Math.round(Q+K),me=Math.round(x+ue),oe=Q,ve=x,ke=Q+T,O=x+X;e.beginPath(),e.moveTo(ee,se),e.lineTo(ee,O),e.lineTo(te,O),e.lineTo(te,me),e.lineTo(te,se),e.lineTo(ee,se),e.stroke(),e.beginPath(),Q!==ee&&(e.moveTo(oe,ve),e.lineTo(oe,O)),e.moveTo(oe,O),e.lineTo(ee,O),e.moveTo(te,O),e.lineTo(ke,O),e.stroke()},T=Z*Math.PI,X=Z*2,V=Q*2+T,W=x*2+X;let p,k,m=+(localStorage.getItem("isochrone population")||10),h=+(localStorage.getItem("isochrone individual")||1),f=+(localStorage.getItem("isochrone resource")||1e6),P=localStorage.getItem("isochrone threshold")!=="-1",q;Pe.subscribe(()=>{b(k,m,h)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{b(k,m,h)});let w,M,v=!0;const C=["workforce","capital"];let c=[...C];function A(e){le[e?"unshift":"push"](()=>{p=e,n(0,p)})}function g(e){le[e?"unshift":"push"](()=>{q=e,n(5,q)})}function S(){f=be(this.value),n(2,f)}function D(){P=this.checked,n(3,P)}const z=()=>{n(4,c=[...C]),n(8,v=!0),n(1,h=1),n(2,f=1e6)},j=e=>{c.splice(e-1,0,c.splice(e,1)[0]),n(4,c),n(8,v=!1)},N=e=>{c.splice(e+1,0,c.splice(e,1)[0]),n(4,c),n(8,v=!1)},J=e=>{n(4,c=c.filter((o,r)=>r!==e)),n(8,v=!1)},U=e=>{n(1,h=e+1),n(8,v=!1)};function _(e){le[e?"unshift":"push"](()=>{w=e,n(6,w)})}function I(e){le[e?"unshift":"push"](()=>{M=e,n(7,M)})}const u=()=>{c.splice(+w.value-1,0,M.value),n(4,c),n(8,v=!1)};return t.$$.update=()=>{t.$$.dirty[0]&1&&p&&(n(0,p.width=V,p),n(0,p.height=W,p),n(11,k=p.getContext("2d"))),t.$$.dirty[0]&4096&&(m<1&&n(12,m=1),localStorage.setItem("isochrone population",""+m)),t.$$.dirty[0]&16&&n(12,m=c.length),t.$$.dirty[0]&4098&&(h<1&&n(1,h=1),h>m&&n(1,h=m),localStorage.setItem("isochrone individual",""+h)),t.$$.dirty[0]&6146&&b(k,m,h),t.$$.dirty[0]&4&&(f<1&&n(2,f=1),localStorage.setItem("isochrone resource",""+f)),t.$$.dirty[0]&8&&(P?localStorage.removeItem("isochrone threshold"):localStorage.setItem("isochrone threshold","-1"))},[p,h,f,P,c,q,w,M,v,F,C,k,m,A,g,S,D,z,j,N,J,U,_,I,u]}class Xe extends ye{constructor(s){super(),Me(this,s,Ye,Ce,Se,{},null,[-1,-1])}}export{Xe as default};
