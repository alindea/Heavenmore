import{S as Me,i as Te,s as je,h as _e,j as s,k as y,t as R,b as r,l as fe,c as V,d as l,m as ge,o as le,p as Ce,q as ye,n as be,e as z,r as Pe,u as Ie,v as we,w as de,x as pe}from"./index-CyEZYCwb.js";function ve(t,o,n){const i=t.slice();i[37]=o[n],i[41]=n;const b=i[11](i[6].length,i[41]+1,i[3],i[4]);return i[38]=b.share,i[39]=b.tautPercentage,i}function ke(t){let o,n,i;return{c(){o=s("button"),o.textContent="Reset",r(o,"type","button")},m(b,v){V(b,o,v),n||(i=le(o,"click",t[18]),n=!0)},p:be,d(b){b&&z(o),n=!1,i()}}}function Ye(t){let o=100/t[1]+"",n,i,b=t[39]*100+"",v,f;return{c(){n=R(o),i=R("% → "),v=R(b),f=R("%")},m(h,c){V(h,n,c),V(h,i,c),V(h,v,c),V(h,f,c)},p(h,c){c[0]&2&&o!==(o=100/h[1]+"")&&de(n,o),c[0]&88&&b!==(b=h[39]*100+"")&&de(v,b)},d(h){h&&(z(n),z(i),z(v),z(f))}}}function Fe(t){let o=parseFloat((100/t[1]).toFixed(2))+"",n,i,b=parseFloat((t[39]*100).toFixed(2))+"",v,f;return{c(){n=R(o),i=R("% → "),v=R(b),f=R("%")},m(h,c){V(h,n,c),V(h,i,c),V(h,v,c),V(h,f,c)},p(h,c){c[0]&2&&o!==(o=parseFloat((100/h[1]).toFixed(2))+"")&&de(n,o),c[0]&88&&b!==(b=parseFloat((h[39]*100).toFixed(2))+"")&&de(v,b)},d(h){h&&(z(n),z(i),z(v),z(f))}}}function Se(t){let o,n,i,b,v=t[38]+"",f,h,c,M,U,ne=t[41]+1+"",D,_,T,w,k,L,W,Y=t[37]+"",B,A,N,I,Z,d,q,F,x,K,$,oe;function Q(){return t[21](t[41])}function ae(){return t[22](t[41])}function se(){return t[23](t[41])}function G(){return t[24](t[41])}function ee(J,e){return J[5]?Fe:Ye}let te=ee(t),C=te(t);return{c(){o=s("tr"),n=s("td"),i=s("b"),b=R("$"),f=R(v),h=y(),c=s("td"),M=s("button"),M.textContent="-",U=y(),D=R(ne),_=y(),T=s("button"),w=R("+"),L=y(),W=s("td"),B=R(Y),A=y(),N=s("td"),I=s("button"),I.textContent="×",Z=y(),d=s("td"),q=s("label"),F=s("input"),K=y(),C.c(),r(n,"class","svelte-vt0mjb"),r(M,"type","button"),M.disabled=t[41]===0,r(T,"type","button"),T.disabled=k=t[41]===t[6].length-1,fe(c,"white-space","nowrap"),r(c,"class","svelte-vt0mjb"),r(W,"class","svelte-vt0mjb"),r(I,"type","button"),fe(I,"color","var(--color-red-500)"),r(N,"class","svelte-vt0mjb"),r(F,"placeholder","graph"),F.checked=x=t[2]===t[41]+1,r(F,"name","individual"),r(F,"type","radio"),fe(q,"display","block"),fe(q,"white-space","nowrap"),r(d,"class","svelte-vt0mjb")},m(J,e){V(J,o,e),l(o,n),l(n,i),l(i,b),l(i,f),l(o,h),l(o,c),l(c,M),l(c,U),l(c,D),l(c,_),l(c,T),l(T,w),l(o,L),l(o,W),l(W,B),l(o,A),l(o,N),l(N,I),l(o,Z),l(o,d),l(d,q),l(q,F),l(q,K),C.m(q,null),$||(oe=[le(M,"click",Q),le(T,"click",ae),le(I,"click",se),le(F,"input",G)],$=!0)},p(J,e){t=J,e[0]&88&&v!==(v=t[38]+"")&&de(f,v),e[0]&64&&k!==(k=t[41]===t[6].length-1)&&(T.disabled=k),e[0]&64&&Y!==(Y=t[37]+"")&&de(B,Y),e[0]&4&&x!==(x=t[2]===t[41]+1)&&(F.checked=x),te===(te=ee(t))&&C?C.p(t,e):(C.d(1),C=te(t),C&&(C.c(),C.m(q,null)))},d(J){J&&z(o),C.d(),$=!1,Ie(oe)}}}function Xe(t){let o,n,i,b,v,f,h,c,M,U,ne,D,_,T,w,k,L,W,Y,B,A,N,I,Z,d,q,F,x,K,$,oe,Q,ae,se,G,ee,te,C,J,e,u,g,H,j,X,O,re,p=!t[10]&&ke(t),P=_e(t[6]),m=[];for(let a=0;a<P.length;a+=1)m[a]=Se(ve(t,P,a));return{c(){o=s("div"),n=s("canvas"),i=y(),b=s("br"),v=y(),f=s("form"),h=s("label"),c=R("Profit: $"),M=s("input"),U=y(),p&&p.c(),ne=y(),D=s("table"),_=s("tr"),T=s("th"),w=R("Share "),k=s("label"),L=s("small"),L.textContent="Round",W=y(),Y=s("input"),B=y(),A=s("th"),A.textContent="Impact",N=y(),I=s("th"),I.textContent="Motive",Z=y(),d=s("th"),d.textContent="Remove",q=y(),F=s("th"),x=R("Graph "),K=s("label"),$=s("small"),$.textContent="Limit decimals",oe=y(),Q=s("input"),ae=y();for(let a=0;a<m.length;a+=1)m[a].c();se=y(),G=s("tr"),ee=s("td"),ee.innerHTML='<button type="submit">Add share</button>',te=y(),C=s("td"),J=s("label"),e=s("input"),H=y(),j=s("td"),X=s("textarea"),r(n,"class","svelte-vt0mjb"),r(M,"type","number"),r(Y,"type","checkbox"),r(T,"class","svelte-vt0mjb"),r(A,"class","svelte-vt0mjb"),r(I,"class","svelte-vt0mjb"),r(d,"class","svelte-vt0mjb"),r(Q,"type","checkbox"),r(F,"class","svelte-vt0mjb"),r(ee,"class","svelte-vt0mjb"),r(e,"placeholder","share Impact"),r(e,"min","1"),r(e,"max",u=t[6].length+1),r(e,"type","number"),r(e,"name","share-impact"),e.value=g=t[6].length+1,r(C,"class","svelte-vt0mjb"),fe(X,"display","block"),r(X,"name","share-motive"),r(j,"colspan","3"),fe(j,"padding","0"),r(j,"class","svelte-vt0mjb"),r(D,"class","svelte-vt0mjb"),r(f,"class","svelte-vt0mjb")},m(a,E){V(a,o,E),l(o,n),t[15](n),l(o,i),l(o,b),l(o,v),l(o,f),l(f,h),l(h,c),l(h,M),t[16](M),ge(M,t[3]),l(f,U),p&&p.m(f,null),l(f,ne),l(f,D),l(D,_),l(_,T),l(T,w),l(T,k),l(k,L),l(k,W),l(k,Y),Y.checked=t[4],l(_,B),l(_,A),l(_,N),l(_,I),l(_,Z),l(_,d),l(_,q),l(_,F),l(F,x),l(F,K),l(K,$),l(K,oe),l(K,Q),Q.checked=t[5],l(D,ae);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(D,null);l(D,se),l(D,G),l(G,ee),l(G,te),l(G,C),l(C,J),l(J,e),t[25](e),l(G,H),l(G,j),l(j,X),t[26](X),O||(re=[le(M,"input",t[17]),le(Y,"change",t[19]),le(Q,"change",t[20]),le(f,"submit",Ce(t[27]))],O=!0)},p(a,E){if(E[0]&8&&ye(M.value)!==a[3]&&ge(M,a[3]),a[10]?p&&(p.d(1),p=null):p?p.p(a,E):(p=ke(a),p.c(),p.m(f,ne)),E[0]&16&&(Y.checked=a[4]),E[0]&32&&(Q.checked=a[5]),E[0]&3198){P=_e(a[6]);let S;for(S=0;S<P.length;S+=1){const ie=ve(a,P,S);m[S]?m[S].p(ie,E):(m[S]=Se(ie),m[S].c(),m[S].m(D,se))}for(;S<m.length;S+=1)m[S].d(1);m.length=P.length}E[0]&64&&u!==(u=a[6].length+1)&&r(e,"max",u),E[0]&64&&g!==(g=a[6].length+1)&&e.value!==g&&(e.value=g)},i:be,o:be,d(a){a&&z(o),t[15](null),t[16](null),p&&p.d(),Pe(m,a),t[25](null),t[26](null),O=!1,Ie(re)}}}const ue=100,ce=1,he=1;function Re(t,o,n){const i=(e,u,g)=>{e&&(e.clearRect(0,0,ne,D),e.strokeStyle=getComputedStyle(document.body).getPropertyValue("--fg-color"),b(e),c(e,u,g))},b=e=>{e.beginPath();for(let u=0;u<=Math.PI;u+=.01){const g=ue*(u-Math.sin(u)),H=ue*(1-Math.cos(u));e.lineTo(ce+g,he+H)}e.stroke()},v=e=>{let u=Math.PI/2,g=!1;for(let j=0;j<10;j++){const X=u-(u-Math.sin(u)-e/ue)/(1-Math.cos(u)),O=Math.abs(X-u);if(u=X,O<1e-8){g=!0;break}}return g?ue*(1-Math.cos(u)):0},f=(e,u)=>{if(u<1||u>e)return;const g=M/e,H=g*(u-1),j=v(H),X=g*u,O=v(X);return{yPercentage:(O-j)/U,indX1:H,indY1:j,indX2:X,indY2:O}},h=(e,u,g,H)=>{const j=f(e,u);if(!j)return{share:0,tautPercentage:0};const{yPercentage:X}=j,O=X*g;return{share:H?Math.round(O):O,tautPercentage:X}},c=(e,u,g)=>{const H=f(u,g);if(!H)return;const{indX1:j,indY1:X,indX2:O,indY2:re}=H,p=Math.round(ce+j),P=Math.round(he+X),m=Math.round(ce+O),a=Math.round(he+re),E=Math.round(ce),S=Math.round(he),ie=Math.round(ce+M),me=Math.round(he+U);e.beginPath(),p!==E&&(e.moveTo(p,P),e.lineTo(E,P),e.lineTo(E,a),e.lineTo(p,a)),m!==ie&&(e.moveTo(m,a),e.lineTo(ie,a),e.lineTo(ie,P),e.lineTo(m,P)),P!==S&&(e.moveTo(p,P),e.lineTo(p,S),e.lineTo(m,S),e.lineTo(m,P)),a!==me&&(e.moveTo(m,a),e.lineTo(m,me),e.lineTo(p,me),e.lineTo(p,a)),e.moveTo(p,P),e.lineTo(p,a),e.lineTo(m,a),e.lineTo(m,P),e.lineTo(p,P),e.stroke()},M=ue*Math.PI,U=ue*2,ne=ce*2+M,D=he*2+U;let _,T,w=+(localStorage.getItem("tautochrone population")||10),k=+(localStorage.getItem("tautochrone individual")||1),L=+(localStorage.getItem("tautochrone resource")||1e6),W=localStorage.getItem("tautochrone threshold")!=="-1",Y=localStorage.getItem("tautochrone limit decimals")!=="-1",B;we.subscribe(()=>{i(T,w,k)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{i(T,w,k)});let A,N,I=!0;const Z=["workforce","capital"];let d=[...Z];try{const e=localStorage.getItem("tautochrone shares");e&&(d=JSON.parse(e),I=!1)}catch{}const q=()=>{const e=new Date,u=e.getHours().toString().padStart(2,"0"),g=e.getMinutes().toString().padStart(2,"0"),H=e.getSeconds().toString().padStart(2,"0"),j=e.getMilliseconds().toString().padEnd(3,"0");return`${u}:${g}:${H}.${j}`};function F(e){pe[e?"unshift":"push"](()=>{_=e,n(0,_)})}function x(e){pe[e?"unshift":"push"](()=>{B=e,n(7,B)})}function K(){L=ye(this.value),n(3,L)}const $=()=>{n(6,d=[...Z]),n(10,I=!0),n(2,k=1),n(3,L=1e6)};function oe(){W=this.checked,n(4,W)}function Q(){Y=this.checked,n(5,Y)}const ae=e=>{d.splice(e-1,0,d.splice(e,1)[0]),n(6,d),n(10,I=!1)},se=e=>{d.splice(e+1,0,d.splice(e,1)[0]),n(6,d),n(10,I=!1)},G=e=>{n(6,d=d.filter((u,g)=>g!==e)),n(10,I=!1)},ee=e=>{n(2,k=e+1),n(10,I=!1)};function te(e){pe[e?"unshift":"push"](()=>{A=e,n(8,A)})}function C(e){pe[e?"unshift":"push"](()=>{N=e,n(9,N)})}const J=()=>{d.splice(+A.value-1,0,N.value||q()),n(6,d),n(9,N.value="",N),n(10,I=!1)};return t.$$.update=()=>{t.$$.dirty[0]&1&&_&&(n(0,_.width=ne,_),n(0,_.height=D,_),n(14,T=_.getContext("2d"))),t.$$.dirty[0]&2&&(w<1&&n(1,w=1),localStorage.setItem("tautochrone population",""+w)),t.$$.dirty[0]&64&&n(1,w=d.length),t.$$.dirty[0]&6&&(k<1&&n(2,k=1),k>w&&n(2,k=w),localStorage.setItem("tautochrone individual",""+k)),t.$$.dirty[0]&16390&&i(T,w,k),t.$$.dirty[0]&8&&(L<1&&n(3,L=1),localStorage.setItem("tautochrone resource",""+L)),t.$$.dirty[0]&16&&(W?localStorage.removeItem("tautochrone threshold"):localStorage.setItem("tautochrone threshold","-1")),t.$$.dirty[0]&32&&(Y?localStorage.removeItem("tautochrone limit decimals"):localStorage.setItem("tautochrone limit decimals","-1")),t.$$.dirty[0]&64&&localStorage.setItem("tautochrone shares",JSON.stringify(d))},[_,w,k,L,W,Y,d,B,A,N,I,h,Z,q,T,F,x,K,$,oe,Q,ae,se,G,ee,te,C,J]}class He extends Me{constructor(o){super(),Te(this,o,Re,Xe,je,{},null,[-1,-1])}}export{He as default};
