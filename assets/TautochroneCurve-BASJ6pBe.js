import{S as ye,i as Me,s as Se,h as he,j as r,k,t as $,b as i,l as ne,c as ie,d as l,m as ce,o as B,p as Ie,q as ge,n as ae,e as ue,r as Te,u as _e,v as Pe,w as fe,x as le}from"./index-B_jOStJu.js";function de(t,o,s){const _=t.slice();return _[34]=o[s],_[36]=s,_}function pe(t){let o,s,_;return{c(){o=r("button"),o.textContent="Reset",i(o,"type","button")},m(X,C){ie(X,o,C),s||(_=B(o,"click",t[17]),s=!0)},p:ae,d(X){X&&ue(o),s=!1,_()}}}function be(t){let o,s,_,X,C=(t[9](t[4].length,t[36]+1,t[2],t[3])||0)+"",w,F,d,T,D,z=t[36]+1+"",Y,y,m,v,p,M,b,R=t[34]+"",H,L,f,S,g,q,E,h,j,A,J;function G(){return t[18](t[36])}function N(){return t[19](t[36])}function K(){return t[20](t[36])}function U(){return t[21](t[36])}return{c(){o=r("tr"),s=r("td"),_=r("b"),X=$("$"),w=$(C),F=k(),d=r("td"),T=r("button"),T.textContent="+",D=k(),Y=$(z),y=k(),m=r("button"),v=$("-"),M=k(),b=r("td"),H=$(R),L=k(),f=r("td"),S=r("button"),S.textContent="Ã—",g=k(),q=r("td"),E=r("label"),h=r("input"),i(s,"class","svelte-1vhsxgl"),i(T,"type","button"),T.disabled=t[36]===0,i(m,"type","button"),m.disabled=p=t[36]===t[4].length-1,i(d,"class","svelte-1vhsxgl"),i(b,"class","svelte-1vhsxgl"),i(S,"type","button"),ne(S,"color","var(--color-red-500)"),i(f,"class","svelte-1vhsxgl"),i(h,"placeholder","Responsibility graph"),h.checked=j=t[1]===t[36]+1,i(h,"name","individual"),i(h,"type","radio"),ne(E,"display","block"),i(q,"class","svelte-1vhsxgl")},m(c,I){ie(c,o,I),l(o,s),l(s,_),l(_,X),l(_,w),l(o,F),l(o,d),l(d,T),l(d,D),l(d,Y),l(d,y),l(d,m),l(m,v),l(o,M),l(o,b),l(b,H),l(o,L),l(o,f),l(f,S),l(o,g),l(o,q),l(q,E),l(E,h),A||(J=[B(T,"click",G),B(m,"click",N),B(S,"click",K),B(h,"input",U)],A=!0)},p(c,I){t=c,I[0]&28&&C!==(C=(t[9](t[4].length,t[36]+1,t[2],t[3])||0)+"")&&fe(w,C),I[0]&16&&p!==(p=t[36]===t[4].length-1)&&(m.disabled=p),I[0]&16&&R!==(R=t[34]+"")&&fe(H,R),I[0]&2&&j!==(j=t[1]===t[36]+1)&&(h.checked=j)},d(c){c&&ue(o),A=!1,_e(J)}}}function Ce(t){let o,s,_,X,C,w,F,d,T,D,z,Y,y,m,v,p,M,b,R,H,L,f,S,g,q,E,h,j,A,J,G,N,K,U,c=!t[8]&&pe(t),I=he(t[4]),e=[];for(let n=0;n<I.length;n+=1)e[n]=be(de(t,I,n));return{c(){o=r("div"),s=r("canvas"),_=k(),X=r("br"),C=k(),w=r("label"),F=$("$"),d=r("input"),T=k(),D=r("label"),z=r("small"),z.textContent="Round",Y=r("input"),y=k(),c&&c.c(),m=k(),v=r("br"),p=k(),M=r("form"),b=r("table"),R=r("tr"),R.innerHTML='<th class="svelte-1vhsxgl">Share</th> <th class="svelte-1vhsxgl">Responsible</th> <th class="svelte-1vhsxgl">Motive</th> <th class="svelte-1vhsxgl">Remove</th> <th class="svelte-1vhsxgl">Graph</th>',H=k();for(let n=0;n<e.length;n+=1)e[n].c();L=k(),f=r("tr"),S=r("td"),S.innerHTML='<button type="submit">Add share</button>',g=k(),q=r("td"),E=r("label"),h=r("input"),J=k(),G=r("td"),N=r("textarea"),i(d,"type","number"),i(Y,"type","checkbox"),i(S,"class","svelte-1vhsxgl"),i(h,"placeholder","share responsibility"),i(h,"min","1"),i(h,"max",j=t[4].length+1),i(h,"type","number"),i(h,"name","share-responsibility"),h.value=A=t[4].length+1,i(q,"class","svelte-1vhsxgl"),ne(N,"display","block"),i(N,"name","share-motive"),i(G,"colspan","3"),ne(G,"padding","0"),i(G,"class","svelte-1vhsxgl"),i(b,"class","svelte-1vhsxgl")},m(n,u){ie(n,o,u),l(o,s),t[13](s),l(o,_),l(o,X),l(o,C),l(o,w),l(w,F),l(w,d),t[14](d),ce(d,t[2]),l(o,T),l(o,D),l(D,z),l(D,Y),Y.checked=t[3],l(o,y),c&&c.m(o,null),l(o,m),l(o,v),l(o,p),l(o,M),l(M,b),l(b,R),l(b,H);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(b,null);l(b,L),l(b,f),l(f,S),l(f,g),l(f,q),l(q,E),l(E,h),t[22](h),l(f,J),l(f,G),l(G,N),t[23](N),K||(U=[B(d,"input",t[15]),B(Y,"change",t[16]),B(M,"submit",Ie(t[24]))],K=!0)},p(n,u){if(u[0]&4&&ge(d.value)!==n[2]&&ce(d,n[2]),u[0]&8&&(Y.checked=n[3]),n[8]?c&&(c.d(1),c=null):c?c.p(n,u):(c=pe(n),c.c(),c.m(o,m)),u[0]&798){I=he(n[4]);let a;for(a=0;a<I.length;a+=1){const P=de(n,I,a);e[a]?e[a].p(P,u):(e[a]=be(P),e[a].c(),e[a].m(b,L))}for(;a<e.length;a+=1)e[a].d(1);e.length=I.length}u[0]&16&&j!==(j=n[4].length+1)&&i(h,"max",j),u[0]&16&&A!==(A=n[4].length+1)&&h.value!==A&&(h.value=A)},i:ae,o:ae,d(n){n&&ue(o),t[13](null),t[14](null),c&&c.d(),Te(e,n),t[22](null),t[23](null),K=!1,_e(U)}}}const Z=100,Q=1,x=1;function Ye(t,o,s){const _=(e,n,u)=>{e&&(e.clearRect(0,0,z,Y),e.strokeStyle=getComputedStyle(document.body).getPropertyValue("--fg-color"),X(e),d(e,n,u))},X=e=>{e.beginPath();for(let n=0;n<=Math.PI;n+=.01){const u=Z*(n-Math.sin(n)),a=Z*(1-Math.cos(n));e.lineTo(Q+u,x+a)}e.stroke()},C=e=>{let n=Math.PI/2,u=!1;for(let P=0;P<10;P++){const V=n-(n-Math.sin(n)-e/Z)/(1-Math.cos(n)),W=Math.abs(V-n);if(n=V,W<1e-8){u=!0;break}}return u?Z*(1-Math.cos(n)):0},w=(e,n)=>{if(n<1||n>e)return;const u=T/e,a=u*(n-1),P=C(a),V=u*n,W=C(V);return{yPercentage:(W-P)/D,indX1:a,indY1:P,indX2:V,indY2:W}},F=(e,n,u,a)=>{const P=w(e,n);if(!P)return 0;const{yPercentage:V}=P,W=V*u;return a?Math.round(W):W},d=(e,n,u)=>{const a=w(n,u);if(!a)return;const{indX1:P,indY1:V,indX2:W,indY2:se}=a,ee=Math.round(Q+P),oe=Math.round(x+V),te=Math.round(Q+W),me=Math.round(x+se),re=Q,ve=x,ke=Q+T,O=x+D;e.beginPath(),e.moveTo(ee,oe),e.lineTo(ee,O),e.lineTo(te,O),e.lineTo(te,me),e.lineTo(te,oe),e.lineTo(ee,oe),e.stroke(),e.beginPath(),Q!==ee&&(e.moveTo(re,ve),e.lineTo(re,O)),e.moveTo(re,O),e.lineTo(ee,O),e.moveTo(te,O),e.lineTo(ke,O),e.stroke()},T=Z*Math.PI,D=Z*2,z=Q*2+T,Y=x*2+D;let y,m,v=+(localStorage.getItem("isochrone population")||10),p=+(localStorage.getItem("isochrone individual")||1),M=+(localStorage.getItem("isochrone resource")||1e6),b=localStorage.getItem("isochrone threshold")!=="-1",R;Pe.subscribe(()=>{_(m,v,p)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{_(m,v,p)});let H,L,f=!0;const S=["work","investments"];let g=[...S];function q(e){le[e?"unshift":"push"](()=>{y=e,s(0,y)})}function E(e){le[e?"unshift":"push"](()=>{R=e,s(5,R)})}function h(){M=ge(this.value),s(2,M)}function j(){b=this.checked,s(3,b)}const A=()=>{s(4,g=[...S]),s(8,f=!0),s(1,p=1),s(2,M=1e6)},J=e=>{g.splice(e-1,0,g.splice(e,1)[0]),s(4,g),s(8,f=!1)},G=e=>{g.splice(e+1,0,g.splice(e,1)[0]),s(4,g),s(8,f=!1)},N=e=>{s(4,g=g.filter((n,u)=>u!==e)),s(8,f=!1)},K=e=>{s(1,p=e+1),s(8,f=!1)};function U(e){le[e?"unshift":"push"](()=>{H=e,s(6,H)})}function c(e){le[e?"unshift":"push"](()=>{L=e,s(7,L)})}const I=()=>{g.splice(+H.value-1,0,L.value),s(4,g),s(8,f=!1)};return t.$$.update=()=>{t.$$.dirty[0]&1&&y&&(s(0,y.width=z,y),s(0,y.height=Y,y),s(11,m=y.getContext("2d"))),t.$$.dirty[0]&4096&&(v<1&&s(12,v=1),localStorage.setItem("isochrone population",""+v)),t.$$.dirty[0]&16&&s(12,v=g.length),t.$$.dirty[0]&4098&&(p<1&&s(1,p=1),p>v&&s(1,p=v),localStorage.setItem("isochrone individual",""+p)),t.$$.dirty[0]&6146&&_(m,v,p),t.$$.dirty[0]&4&&(M<1&&s(2,M=1),localStorage.setItem("isochrone resource",""+M)),t.$$.dirty[0]&8&&(b?localStorage.removeItem("isochrone threshold"):localStorage.setItem("isochrone threshold","-1"))},[y,p,M,b,g,R,H,L,f,F,S,m,v,q,E,h,j,A,J,G,N,K,U,c,I]}class Xe extends ye{constructor(o){super(),Me(this,o,Ye,Ce,Se,{},null,[-1,-1])}}export{Xe as default};
