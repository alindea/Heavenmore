import{S as ye,i as Me,s as Te,h as ge,j as s,k as b,t as G,b as i,l as re,c as fe,d as t,m as _e,o as ee,p as Ie,q as ke,n as de,e as pe,r as je,u as Se,v as Ce,w as se,x as ae}from"./index-DgqxNKNN.js";function me(l,u,n){const h=l.slice();h[35]=u[n],h[39]=n;const X=h[10](h[5].length,h[39]+1,h[3],h[4]);return h[36]=X.share,h[37]=X.tautPercentage,h}function be(l){let u,n,h;return{c(){u=s("button"),u.textContent="Reset",i(u,"type","button")},m(X,E){fe(X,u,E),n||(h=ee(u,"click",l[17]),n=!0)},p:de,d(X){X&&pe(u),n=!1,h()}}}function ve(l){let u,n,h,X,E=l[36]+"",M,K,q,v,Q,x=l[39]+1+"",P,f,k,I,p,R,J,Y=l[35]+"",W,D,j,w,g,L,H,F,U,$,N=parseFloat((100/l[1]).toFixed(2))+"",V,te,A=parseFloat((l[37]*100).toFixed(2))+"",Z,T,z,B;function e(){return l[19](l[39])}function o(){return l[20](l[39])}function d(){return l[21](l[39])}function y(){return l[22](l[39])}return{c(){u=s("tr"),n=s("td"),h=s("b"),X=G("$"),M=G(E),K=b(),q=s("td"),v=s("button"),v.textContent="-",Q=b(),P=G(x),f=b(),k=s("button"),I=G("+"),R=b(),J=s("td"),W=G(Y),D=b(),j=s("td"),w=s("button"),w.textContent="×",g=b(),L=s("td"),H=s("label"),F=s("input"),$=b(),V=G(N),te=G("% → "),Z=G(A),T=G("%"),i(n,"class","svelte-gjvl7"),i(v,"type","button"),v.disabled=l[39]===0,i(k,"type","button"),k.disabled=p=l[39]===l[5].length-1,i(q,"class","svelte-gjvl7"),i(J,"class","svelte-gjvl7"),i(w,"type","button"),re(w,"color","var(--color-red-500)"),i(j,"class","svelte-gjvl7"),i(F,"placeholder","graph"),F.checked=U=l[2]===l[39]+1,i(F,"name","individual"),i(F,"type","radio"),re(H,"display","block"),i(L,"class","svelte-gjvl7")},m(_,r){fe(_,u,r),t(u,n),t(n,h),t(h,X),t(h,M),t(u,K),t(u,q),t(q,v),t(q,Q),t(q,P),t(q,f),t(q,k),t(k,I),t(u,R),t(u,J),t(J,W),t(u,D),t(u,j),t(j,w),t(u,g),t(u,L),t(L,H),t(H,F),t(H,$),t(H,V),t(H,te),t(H,Z),t(H,T),z||(B=[ee(v,"click",e),ee(k,"click",o),ee(w,"click",d),ee(F,"input",y)],z=!0)},p(_,r){l=_,r[0]&56&&E!==(E=l[36]+"")&&se(M,E),r[0]&32&&p!==(p=l[39]===l[5].length-1)&&(k.disabled=p),r[0]&32&&Y!==(Y=l[35]+"")&&se(W,Y),r[0]&4&&U!==(U=l[2]===l[39]+1)&&(F.checked=U),r[0]&2&&N!==(N=parseFloat((100/l[1]).toFixed(2))+"")&&se(V,N),r[0]&56&&A!==(A=parseFloat((l[37]*100).toFixed(2))+"")&&se(Z,A)},d(_){_&&pe(u),z=!1,Se(B)}}}function Pe(l){let u,n,h,X,E,M,K,q,v,Q,x,P,f,k,I,p,R,J,Y,W,D,j,w,g,L,H,F,U,$,N,V,te,A,Z,T,z,B,e,o,d,y,_,r=!l[9]&&be(l),C=ge(l[5]),S=[];for(let a=0;a<C.length;a+=1)S[a]=ve(me(l,C,a));return{c(){u=s("div"),n=s("canvas"),h=b(),X=s("br"),E=b(),M=s("form"),K=s("label"),q=G("Profit: $"),v=s("input"),Q=b(),r&&r.c(),x=b(),P=s("table"),f=s("tr"),k=s("th"),I=G("Share "),p=s("label"),R=s("small"),R.textContent="Round",J=b(),Y=s("input"),W=b(),D=s("th"),D.textContent="Impact",j=b(),w=s("th"),w.textContent="Motive",g=b(),L=s("th"),L.textContent="Remove",H=b(),F=s("th"),F.textContent="Graph",U=b();for(let a=0;a<S.length;a+=1)S[a].c();$=b(),N=s("tr"),V=s("td"),V.innerHTML='<button type="submit">Add share</button>',te=b(),A=s("td"),Z=s("label"),T=s("input"),e=b(),o=s("td"),d=s("textarea"),i(n,"class","svelte-gjvl7"),i(v,"type","number"),i(Y,"type","checkbox"),i(k,"class","svelte-gjvl7"),i(D,"class","svelte-gjvl7"),i(w,"class","svelte-gjvl7"),i(L,"class","svelte-gjvl7"),i(F,"class","svelte-gjvl7"),i(V,"class","svelte-gjvl7"),i(T,"placeholder","share Impact"),i(T,"min","1"),i(T,"max",z=l[5].length+1),i(T,"type","number"),i(T,"name","share-impact"),T.value=B=l[5].length+1,i(A,"class","svelte-gjvl7"),re(d,"display","block"),i(d,"name","share-motive"),i(o,"colspan","3"),re(o,"padding","0"),i(o,"class","svelte-gjvl7"),i(P,"class","svelte-gjvl7"),i(M,"class","svelte-gjvl7")},m(a,m){fe(a,u,m),t(u,n),l[14](n),t(u,h),t(u,X),t(u,E),t(u,M),t(M,K),t(K,q),t(K,v),l[15](v),_e(v,l[3]),t(M,Q),r&&r.m(M,null),t(M,x),t(M,P),t(P,f),t(f,k),t(k,I),t(k,p),t(p,R),t(p,J),t(p,Y),Y.checked=l[4],t(f,W),t(f,D),t(f,j),t(f,w),t(f,g),t(f,L),t(f,H),t(f,F),t(P,U);for(let c=0;c<S.length;c+=1)S[c]&&S[c].m(P,null);t(P,$),t(P,N),t(N,V),t(N,te),t(N,A),t(A,Z),t(Z,T),l[23](T),t(N,e),t(N,o),t(o,d),l[24](d),y||(_=[ee(v,"input",l[16]),ee(Y,"change",l[18]),ee(M,"submit",Ie(l[25]))],y=!0)},p(a,m){if(m[0]&8&&ke(v.value)!==a[3]&&_e(v,a[3]),a[9]?r&&(r.d(1),r=null):r?r.p(a,m):(r=be(a),r.c(),r.m(M,x)),m[0]&16&&(Y.checked=a[4]),m[0]&1598){C=ge(a[5]);let c;for(c=0;c<C.length;c+=1){const O=me(a,C,c);S[c]?S[c].p(O,m):(S[c]=ve(O),S[c].c(),S[c].m(P,$))}for(;c<S.length;c+=1)S[c].d(1);S.length=C.length}m[0]&32&&z!==(z=a[5].length+1)&&i(T,"max",z),m[0]&32&&B!==(B=a[5].length+1)&&T.value!==B&&(T.value=B)},i:de,o:de,d(a){a&&pe(u),l[14](null),l[15](null),r&&r.d(),je(S,a),l[23](null),l[24](null),y=!1,Se(_)}}}const le=100,ne=1,oe=1;function Ye(l,u,n){const h=(e,o,d)=>{e&&(e.clearRect(0,0,x,P),e.strokeStyle=getComputedStyle(document.body).getPropertyValue("--fg-color"),X(e),q(e,o,d))},X=e=>{e.beginPath();for(let o=0;o<=Math.PI;o+=.01){const d=le*(o-Math.sin(o)),y=le*(1-Math.cos(o));e.lineTo(ne+d,oe+y)}e.stroke()},E=e=>{let o=Math.PI/2,d=!1;for(let _=0;_<10;_++){const r=o-(o-Math.sin(o)-e/le)/(1-Math.cos(o)),C=Math.abs(r-o);if(o=r,C<1e-8){d=!0;break}}return d?le*(1-Math.cos(o)):0},M=(e,o)=>{if(o<1||o>e)return;const d=v/e,y=d*(o-1),_=E(y),r=d*o,C=E(r);return{yPercentage:(C-_)/Q,indX1:y,indY1:_,indX2:r,indY2:C}},K=(e,o,d,y)=>{const _=M(e,o);if(!_)return{share:0,tautPercentage:0};const{yPercentage:r}=_,C=r*d;return{share:y?Math.round(C):C,tautPercentage:r}},q=(e,o,d)=>{const y=M(o,d);if(!y)return;const{indX1:_,indY1:r,indX2:C,indY2:S}=y,a=Math.round(ne+_),m=Math.round(oe+r),c=Math.round(ne+C),O=Math.round(oe+S),ue=Math.round(ne),ie=Math.round(oe),ce=Math.round(ne+v),he=Math.round(oe+Q);e.beginPath(),a!==ue&&(e.moveTo(a,m),e.lineTo(ue,m),e.lineTo(ue,O),e.lineTo(a,O)),c!==ce&&(e.moveTo(c,O),e.lineTo(ce,O),e.lineTo(ce,m),e.lineTo(c,m)),m!==ie&&(e.moveTo(a,m),e.lineTo(a,ie),e.lineTo(c,ie),e.lineTo(c,m)),O!==he&&(e.moveTo(c,O),e.lineTo(c,he),e.lineTo(a,he),e.lineTo(a,O)),e.moveTo(a,m),e.lineTo(a,O),e.lineTo(c,O),e.lineTo(c,m),e.lineTo(a,m),e.stroke()},v=le*Math.PI,Q=le*2,x=ne*2+v,P=oe*2+Q;let f,k,I=+(localStorage.getItem("tautochrone population")||10),p=+(localStorage.getItem("tautochrone individual")||1),R=+(localStorage.getItem("tautochrone resource")||1e6),J=localStorage.getItem("tautochrone threshold")!=="-1",Y;Ce.subscribe(()=>{h(k,I,p)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{h(k,I,p)});let W,D,j=!0;const w=["workforce","capital"];let g=[...w];try{const e=localStorage.getItem("tautochrone shares");e&&(g=JSON.parse(e),j=!1)}catch{}const L=()=>{const e=new Date,o=e.getHours().toString().padStart(2,"0"),d=e.getMinutes().toString().padStart(2,"0"),y=e.getSeconds().toString().padStart(2,"0"),_=e.getMilliseconds().toString().padEnd(3,"0");return`${o}:${d}:${y}.${_}`};function H(e){ae[e?"unshift":"push"](()=>{f=e,n(0,f)})}function F(e){ae[e?"unshift":"push"](()=>{Y=e,n(6,Y)})}function U(){R=ke(this.value),n(3,R)}const $=()=>{n(5,g=[...w]),n(9,j=!0),n(2,p=1),n(3,R=1e6)};function N(){J=this.checked,n(4,J)}const V=e=>{g.splice(e-1,0,g.splice(e,1)[0]),n(5,g),n(9,j=!1)},te=e=>{g.splice(e+1,0,g.splice(e,1)[0]),n(5,g),n(9,j=!1)},A=e=>{n(5,g=g.filter((o,d)=>d!==e)),n(9,j=!1)},Z=e=>{n(2,p=e+1),n(9,j=!1)};function T(e){ae[e?"unshift":"push"](()=>{W=e,n(7,W)})}function z(e){ae[e?"unshift":"push"](()=>{D=e,n(8,D)})}const B=()=>{g.splice(+W.value-1,0,D.value||L()),n(5,g),n(8,D.value="",D),n(9,j=!1)};return l.$$.update=()=>{l.$$.dirty[0]&1&&f&&(n(0,f.width=x,f),n(0,f.height=P,f),n(13,k=f.getContext("2d"))),l.$$.dirty[0]&2&&(I<1&&n(1,I=1),localStorage.setItem("tautochrone population",""+I)),l.$$.dirty[0]&32&&n(1,I=g.length),l.$$.dirty[0]&6&&(p<1&&n(2,p=1),p>I&&n(2,p=I),localStorage.setItem("tautochrone individual",""+p)),l.$$.dirty[0]&8198&&h(k,I,p),l.$$.dirty[0]&8&&(R<1&&n(3,R=1),localStorage.setItem("tautochrone resource",""+R)),l.$$.dirty[0]&16&&(J?localStorage.removeItem("tautochrone threshold"):localStorage.setItem("tautochrone threshold","-1")),l.$$.dirty[0]&32&&localStorage.setItem("tautochrone shares",JSON.stringify(g))},[f,I,p,R,J,g,Y,W,D,j,K,w,L,k,H,F,U,$,N,V,te,A,Z,T,z,B]}class Fe extends ye{constructor(u){super(),Me(this,u,Ye,Pe,Te,{},null,[-1,-1])}}export{Fe as default};
