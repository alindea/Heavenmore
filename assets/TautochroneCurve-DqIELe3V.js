import{S as ye,i as Me,s as Te,h as pe,j as r,k as M,t as ne,b as a,l as re,c as he,d as l,m as ge,o as U,p as Ie,q as ke,n as ce,e as de,r as je,u as Se,v as Pe,w as me,x as se}from"./index-CVidEIAK.js";function _e(t,s,n){const b=t.slice();return b[35]=s[n],b[37]=n,b}function be(t){let s,n,b;return{c(){s=r("button"),s.textContent="Reset",a(s,"type","button")},m(L,w){he(L,s,w),n||(b=U(s,"click",t[18]),n=!0)},p:ce,d(L){L&&de(s),n=!1,b()}}}function ve(t){let s,n,b,L,w=(t[9](t[4].length,t[37]+1,t[2],t[3])||0)+"",g,V,P,m,z,J=t[37]+1+"",B,T,h,y,d,f,C,N=t[35]+"",X,S,v,Y,c,q,_,I,R,Q,E;function F(){return t[19](t[37])}function Z(){return t[20](t[37])}function x(){return t[21](t[37])}function k(){return t[22](t[37])}return{c(){s=r("tr"),n=r("td"),b=r("b"),L=ne("$"),g=ne(w),V=M(),P=r("td"),m=r("button"),m.textContent="-",z=M(),B=ne(J),T=M(),h=r("button"),y=ne("+"),f=M(),C=r("td"),X=ne(N),S=M(),v=r("td"),Y=r("button"),Y.textContent="Ã—",c=M(),q=r("td"),_=r("label"),I=r("input"),a(n,"class","svelte-gjvl7"),a(m,"type","button"),m.disabled=t[37]===0,a(h,"type","button"),h.disabled=d=t[37]===t[4].length-1,a(P,"class","svelte-gjvl7"),a(C,"class","svelte-gjvl7"),a(Y,"type","button"),re(Y,"color","var(--color-red-500)"),a(v,"class","svelte-gjvl7"),a(I,"placeholder","graph"),I.checked=R=t[1]===t[37]+1,a(I,"name","individual"),a(I,"type","radio"),re(_,"display","block"),a(q,"class","svelte-gjvl7")},m(j,u){he(j,s,u),l(s,n),l(n,b),l(b,L),l(b,g),l(s,V),l(s,P),l(P,m),l(P,z),l(P,B),l(P,T),l(P,h),l(h,y),l(s,f),l(s,C),l(C,X),l(s,S),l(s,v),l(v,Y),l(s,c),l(s,q),l(q,_),l(_,I),Q||(E=[U(m,"click",F),U(h,"click",Z),U(Y,"click",x),U(I,"input",k)],Q=!0)},p(j,u){t=j,u[0]&28&&w!==(w=(t[9](t[4].length,t[37]+1,t[2],t[3])||0)+"")&&me(g,w),u[0]&16&&d!==(d=t[37]===t[4].length-1)&&(h.disabled=d),u[0]&16&&N!==(N=t[35]+"")&&me(X,N),u[0]&2&&R!==(R=t[1]===t[37]+1)&&(I.checked=R)},d(j){j&&de(s),Q=!1,Se(E)}}}function Ce(t){let s,n,b,L,w,g,V,P,m,z,J,B,T,h,y,d,f,C,N,X,S,v,Y,c,q,_,I,R,Q,E,F,Z,x,k=!t[8]&&be(t),j=pe(t[4]),u=[];for(let i=0;i<j.length;i+=1)u[i]=ve(_e(t,j,i));return{c(){s=r("div"),n=r("canvas"),b=M(),L=r("br"),w=M(),g=r("form"),V=r("label"),P=ne("Profit: $"),m=r("input"),z=M(),J=r("label"),B=r("small"),B.textContent="Round",T=M(),h=r("input"),y=M(),k&&k.c(),d=M(),f=r("table"),C=r("tr"),C.innerHTML='<th class="svelte-gjvl7">Share</th> <th class="svelte-gjvl7">Impact</th> <th class="svelte-gjvl7">Motive</th> <th class="svelte-gjvl7">Remove</th> <th class="svelte-gjvl7">Graph</th>',N=M();for(let i=0;i<u.length;i+=1)u[i].c();X=M(),S=r("tr"),v=r("td"),v.innerHTML='<button type="submit">Add share</button>',Y=M(),c=r("td"),q=r("label"),_=r("input"),Q=M(),E=r("td"),F=r("textarea"),a(n,"class","svelte-gjvl7"),a(m,"type","number"),a(h,"type","checkbox"),a(v,"class","svelte-gjvl7"),a(_,"placeholder","share Impact"),a(_,"min","1"),a(_,"max",I=t[4].length+1),a(_,"type","number"),a(_,"name","share-impact"),_.value=R=t[4].length+1,a(c,"class","svelte-gjvl7"),re(F,"display","block"),a(F,"name","share-motive"),a(E,"colspan","3"),re(E,"padding","0"),a(E,"class","svelte-gjvl7"),a(f,"class","svelte-gjvl7"),a(g,"class","svelte-gjvl7")},m(i,e){he(i,s,e),l(s,n),t[14](n),l(s,b),l(s,L),l(s,w),l(s,g),l(g,V),l(V,P),l(V,m),t[15](m),ge(m,t[2]),l(g,z),l(g,J),l(J,B),l(J,T),l(J,h),h.checked=t[3],l(g,y),k&&k.m(g,null),l(g,d),l(g,f),l(f,C),l(f,N);for(let o=0;o<u.length;o+=1)u[o]&&u[o].m(f,null);l(f,X),l(f,S),l(S,v),l(S,Y),l(S,c),l(c,q),l(q,_),t[23](_),l(S,Q),l(S,E),l(E,F),t[24](F),Z||(x=[U(m,"input",t[16]),U(h,"change",t[17]),U(g,"submit",Ie(t[25]))],Z=!0)},p(i,e){if(e[0]&4&&ke(m.value)!==i[2]&&ge(m,i[2]),e[0]&8&&(h.checked=i[3]),i[8]?k&&(k.d(1),k=null):k?k.p(i,e):(k=be(i),k.c(),k.m(g,d)),e[0]&798){j=pe(i[4]);let o;for(o=0;o<j.length;o+=1){const p=_e(i,j,o);u[o]?u[o].p(p,e):(u[o]=ve(p),u[o].c(),u[o].m(f,X))}for(;o<u.length;o+=1)u[o].d(1);u.length=j.length}e[0]&16&&I!==(I=i[4].length+1)&&a(_,"max",I),e[0]&16&&R!==(R=i[4].length+1)&&_.value!==R&&(_.value=R)},i:ce,o:ce,d(i){i&&de(s),t[14](null),t[15](null),k&&k.d(),je(u,i),t[23](null),t[24](null),Z=!1,Se(x)}}}const ee=100,te=1,le=1;function Ye(t,s,n){const b=(e,o,p)=>{e&&(e.clearRect(0,0,J,B),e.strokeStyle=getComputedStyle(document.body).getPropertyValue("--fg-color"),L(e),P(e,o,p))},L=e=>{e.beginPath();for(let o=0;o<=Math.PI;o+=.01){const p=ee*(o-Math.sin(o)),H=ee*(1-Math.cos(o));e.lineTo(te+p,le+H)}e.stroke()},w=e=>{let o=Math.PI/2,p=!1;for(let D=0;D<10;D++){const O=o-(o-Math.sin(o)-e/ee)/(1-Math.cos(o)),$=Math.abs(O-o);if(o=O,$<1e-8){p=!0;break}}return p?ee*(1-Math.cos(o)):0},g=(e,o)=>{if(o<1||o>e)return;const p=m/e,H=p*(o-1),D=w(H),O=p*o,$=w(O);return{yPercentage:($-D)/z,indX1:H,indY1:D,indX2:O,indY2:$}},V=(e,o,p,H)=>{const D=g(e,o);if(!D)return 0;const O=D.yPercentage*p;return H?Math.round(O):O},P=(e,o,p)=>{const H=g(o,p);if(!H)return;const{indX1:D,indY1:O,indX2:$,indY2:fe}=H,W=Math.round(te+D),A=Math.round(le+O),G=Math.round(te+$),K=Math.round(le+fe),ae=Math.round(te),ie=Math.round(le),oe=Math.round(te+m),ue=Math.round(le+z);e.beginPath(),W!==ae&&(e.moveTo(W,A),e.lineTo(ae,A),e.lineTo(ae,K),e.lineTo(W,K)),G!==oe&&(console.log(G,oe),e.moveTo(G,K),e.lineTo(oe,K),e.lineTo(oe,A),e.lineTo(G,A)),A!==ie&&(e.moveTo(W,A),e.lineTo(W,ie),e.lineTo(G,ie),e.lineTo(G,A)),K!==ue&&(e.moveTo(G,K),e.lineTo(G,ue),e.lineTo(W,ue),e.lineTo(W,K)),e.moveTo(W,A),e.lineTo(W,K),e.lineTo(G,K),e.lineTo(G,A),e.lineTo(W,A),e.stroke()},m=ee*Math.PI,z=ee*2,J=te*2+m,B=le*2+z;let T,h,y=+(localStorage.getItem("isochrone population")||10),d=+(localStorage.getItem("isochrone individual")||1),f=+(localStorage.getItem("isochrone resource")||1e6),C=localStorage.getItem("isochrone threshold")!=="-1",N;Pe.subscribe(()=>{b(h,y,d)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{b(h,y,d)});let X,S,v=!0;const Y=["workforce","capital"];let c=[...Y];try{const e=localStorage.getItem("isochrone shares");e&&(c=JSON.parse(e),v=!1)}catch{}const q=()=>{const e=new Date,o=e.getHours().toString().padStart(2,"0"),p=e.getMinutes().toString().padStart(2,"0"),H=e.getSeconds().toString().padStart(2,"0"),D=e.getMilliseconds().toString().padEnd(3,"0");return`${o}:${p}:${H}.${D}`};function _(e){se[e?"unshift":"push"](()=>{T=e,n(0,T)})}function I(e){se[e?"unshift":"push"](()=>{N=e,n(5,N)})}function R(){f=ke(this.value),n(2,f)}function Q(){C=this.checked,n(3,C)}const E=()=>{n(4,c=[...Y]),n(8,v=!0),n(1,d=1),n(2,f=1e6)},F=e=>{c.splice(e-1,0,c.splice(e,1)[0]),n(4,c),n(8,v=!1)},Z=e=>{c.splice(e+1,0,c.splice(e,1)[0]),n(4,c),n(8,v=!1)},x=e=>{n(4,c=c.filter((o,p)=>p!==e)),n(8,v=!1)},k=e=>{n(1,d=e+1),n(8,v=!1)};function j(e){se[e?"unshift":"push"](()=>{X=e,n(6,X)})}function u(e){se[e?"unshift":"push"](()=>{S=e,n(7,S)})}const i=()=>{c.splice(+X.value-1,0,S.value||q()),n(4,c),n(7,S.value="",S),n(8,v=!1)};return t.$$.update=()=>{t.$$.dirty[0]&1&&T&&(n(0,T.width=J,T),n(0,T.height=B,T),n(12,h=T.getContext("2d"))),t.$$.dirty[0]&8192&&(y<1&&n(13,y=1),localStorage.setItem("isochrone population",""+y)),t.$$.dirty[0]&16&&n(13,y=c.length),t.$$.dirty[0]&8194&&(d<1&&n(1,d=1),d>y&&n(1,d=y),localStorage.setItem("isochrone individual",""+d)),t.$$.dirty[0]&12290&&b(h,y,d),t.$$.dirty[0]&4&&(f<1&&n(2,f=1),localStorage.setItem("isochrone resource",""+f)),t.$$.dirty[0]&8&&(C?localStorage.removeItem("isochrone threshold"):localStorage.setItem("isochrone threshold","-1")),t.$$.dirty[0]&16&&localStorage.setItem("isochrone shares",JSON.stringify(c))},[T,d,f,C,c,N,X,S,v,V,Y,q,h,y,_,I,R,Q,E,F,Z,x,k,j,u,i]}class Xe extends ye{constructor(s){super(),Me(this,s,Ye,Ce,Te,{},null,[-1,-1])}}export{Xe as default};
